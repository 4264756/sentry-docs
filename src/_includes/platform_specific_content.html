{%- assign has_errors = false -%}
{%- unless include.key and include.platforms and include.contents -%}
{%- assign has_errors = true -%}
{%- endunless -%}
{%- if has_errors != true -%}
<div class="js-platform-specific-content">
  <ul class="nav nav-pills" id="pills-tab" role="tablist">
    {% for platform in include.platforms %}
    <li class="nav-item">
      <a class="nav-link{% if forloop.first %} active{% endif %}"
        id="{{ include.key }}-{{ platform.slug }}-tab"
        data-toggle="pill"
        data-slug="{{ platform.slug }}"
        href="#{{ include.key }}-{{ platform.slug }}"
        role="tab"
        aria-controls="{{ include.key }}-{{ platform.slug }}"
        aria-selected="true"
      >
        {{ platform.name }}
      </a>
    </li>
    {% endfor %}
  </ul>
  <div class="tab-content" id="{{ include.key }}-tabContent">
    {% for content in include.contents %}
    {% assign platform = include.platforms[forloop.index0] %}
    <div class="tab-pane fade{% if forloop.first %} show active{% endif %}"
      id="{{ include.key }}-{{ platform.slug }}"
      data-slug="{{ platform.slug }}"
      role="tabpanel"
      aria-labelledby="{{ include.key }}-{{ platform.slug }}-tab"
    >
      {{ content | liquify | markdownify }}
    </div>
    {% endfor %}
  </div>
</div>
{%- elsif jekyll.environment == 'development' -%}
<div class="alert alert-danger">
  <h4 class="alert-heading">Language switcher error</h4>
  <hr>
  {%- unless include.key and include.platforms and include.contents -%}
  {% unless include.key %}<p>Missing value: <code>key</code> String: (must be unique)</p>{% endunless %}
  {% unless include.platforms %}<p>Missing value: <code>platforms</code> Array</p>{% endunless %}
  {% unless include.contents %}<p>Missing value: <code>contents</code> Array</p>{% endunless %}
  {%- endunless -%}
  {%- unless include.platforms.size == include.contents.size -%}
  <p>The values of <code>platforms</code> and <code>contents</code> must contain the same number of items</p>
  {%- endunless -%}
</div>
{%- endif -%}
